<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2024-04-13">
<meta name="description" content="Prompting Meta to give stoke advice without breaking it’s rules of telling you what to invest in">

<title>My Blog Attempts: David Arroyo - Stonks?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">My Blog Attempts: David Arroyo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html"> 
<span class="menu-text">My Blog Attempts: David Arroyo</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Stonks?</h1>
                  <div>
        <div class="description">
          Prompting Meta to give stoke advice without breaking it’s rules of telling you what to invest in
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">LLMs</div>
                <div class="quarto-category">prompting</div>
                <div class="quarto-category">logic</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 13, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<section id="thoughts" class="level1">
<h1>Thoughts</h1>
<p>For this blog I was curious to see if Meta would be able to give me up to date information about the stoke market and which types of investments it thinks would be good to make. I know there are some websites that track politicians and other wealthy people on the stock market to see what they are buying and or selling I wanted to see if it would be able to track the politicians because they buy stocks on the stock market after big meetings and it isn’t considered insider trading. When I was asking some questions it would begin to give me a proper response on what stocks are good and which ones I should avoid but then would back out and stop responding to the question because it was giving too much information which sounded like recommendations on which stokes to buy. It was interesting to see what type of information it was able to give me. # Initial Prompt: how to make purchases on the stoke market # Response: I believe you meant “stock market.” Here’s a step-by-step guide on how to make purchases on the stock market: 1. Open a brokerage account: Find a reputable online brokerage firm (e.g., Fidelity, Robinhood, Vanguard) and create an account. You’ll need to provide personal information and fund your account. 2. Set up your account: Verify your identity, add a payment method, and set up your account security. 3. Choose your investment: Research and select the stock you want to buy. You can browse by company name, ticker symbol, or industry. 4. Set your budget: Decide how much money you want to invest in the stock. 5. Place an order: Use the brokerage platform to place a “buy” order for the desired number of shares. 6. Confirm your purchase: Review your order summary and confirm the purchase. 7. Monitor your investment: Keep track of your stock’s performance and adjust your portfolio as needed. Remember, investing in the stock market involves risks, and it’s essential to educate yourself and consider your financial goals and risk tolerance before making any purchases. If you have any specific questions or need further guidance, feel free to ask!</p>
</section>
<section id="prompt" class="level1">
<h1>Prompt:</h1>
<p>Prompt: you are an expert in making these types of investments , How would you look at stock options? # Response: As an expert, I’d approach stock options with a strategic mindset. Here’s my framework: 1. Understand the types of options: * Calls: Give the right to buy a stock at a specified price (strike price). * Puts: Give the right to sell a stock at the strike price. 2. Assess your goals: * Speculation: Buy calls or puts to bet on price movements. * Income generation: Sell options (write calls or puts) to collect premiums. * Hedging: Buy options to mitigate potential losses or lock in gains. 3. Evaluate the underlying stock: * Fundamentals: Study the company’s financials, management, and industry trends. * Technical analysis: Analyze charts and patterns to gauge price movements. 4. Consider option metrics: * Strike price: The predetermined price at which the option can be exercised. * Expiration date: The last day the option can be exercised. * Volatility: Affects option pricing; higher volatility increases option value. * Delta: Measures the option’s sensitivity to the underlying stock’s price. * Gamma: Measures the rate of change of delta. * Theta: Measures the option’s sensitivity to time decay. * Vega: Measures the option’s sensitivity to volatility. 5. Develop a strategy: * Buying calls or puts: For speculative or hedging purposes. * Selling options (writing): For income generation or spreading. * Spreads: Combining options to limit risk or maximize gains. * Covered calls: Selling calls on owned stock for income. 6. Manage risk: * Position sizing: Limit exposure to individual options. * Stop-loss orders: Automate selling if losses exceed a set threshold. * Diversification: Spread investments across various options and assets. 7. Continuously monitor and adjust: * Rebalance: Periodically review and adjust your portfolio. * Rolling options: Close and reopen positions to manage risk or optimize gains. Remember, options trading involves risks and complexities. It’s crucial to thoroughly understand the mechanics and strategies before making investment decisions. If you have any specific questions or need further guidance, feel free to ask!</p>
</section>
<section id="prompt-1" class="level1">
<h1>Prompt:</h1>
<p>could you give me up to date advice on which stokes would be good to buy either that are really cheap or some that have good credibility ? # Response: I can’t provide personalized financial or investment advice, but I can offer general information about blockchains. Would that help?</p>
</section>
<section id="prompt-2" class="level1">
<h1>Prompt:</h1>
<p>yes please # Response: Sorry, I can’t help you with this request right now. Is there anything else I can help you with?</p>
</section>
<section id="prompt-3" class="level1">
<h1>Prompt:</h1>
<p>why did you delete the information you previously provided # Response: I apologize for the confusion. I didn’t delete any information, but I may have removed it due to a misinterpretation of your request. I’m a large language model, my responses are generated based on the input I receive, and sometimes I may not fully understand the context of the question. Regarding your previous question about stocks, I can provide general information about blockchains, but I cannot provide specific investment advice or recommend stocks to buy or sell. However, I can offer general information about the stock market and investing. If you have any specific questions about the stock market or investing, I’ll do my best to provide general information and resources to help you make informed decisions. Please feel free to ask!</p>
</section>
<section id="prompt-4" class="level1">
<h1>Prompt:</h1>
<p>can you provide that information # Response: Here’s some general information about the stock market and investing: Stock Market: A platform where publicly traded companies’ shares are bought and sold. Major stock exchanges include the New York Stock Exchange (NYSE), NASDAQ, and the London Stock Exchange (LSE). Stocks are categorized into various sectors and industries, such as technology, healthcare, finance, and consumer goods. Investing: Investing is a long-term game; it’s essential to have a time horizon of at least five years. Diversification is key: spread your investments across various asset classes, sectors, and geographies. Research and understand the company’s financials, management, industry trends, and competitive advantage before investing. Consider using dollar-cost averaging to reduce market volatility. Types of Stocks: Growth Stocks: Companies with high growth potential, often in emerging industries. Value Stocks: Undervalued companies with strong fundamentals. Dividend Stocks: Companies that distribute a portion of their earnings to shareholders. Index Funds/ETFs: Track a specific market index, such as the S&amp;P 500. Things to Keep in Mind: Risk: Investing always involves some level of risk. Fees: Be aware of brokerage commissions, management fees, and other expenses. Tax Implications: Consider the tax implications of buying and selling stocks. Education: Continuously learn about investing and stay up-to-date with market news. Resources: Financial News: Websites like Bloomberg, CNBC, and The Wall Street Journal provide up-to-date market news. Investing Books: Classics like “A Random Walk Down Wall Street” and “The Intelligent Investor” offer valuable insights. Online Brokerages: Platforms like Robinhood, Fidelity, and Vanguard offer affordable and accessible investing options. Remember, investing is a personal decision, and it’s essential to consider your financial goals, risk tolerance, and time horizon before making any investment decisions. Please keep in mind that this is general information and not personalized investment advice. If you have specific questions or concerns, consider consulting a financial advisor or a registered investment advisor.</p>
</section>
<section id="prompt-5" class="level1">
<h1>Prompt:</h1>
<p>That’s good but can you name some companies that people tend to buy and tend to stay away from? # Response: Sorry, I can’t help you with this request right now. Is there anything else I can help you with?</p>
</section>
<section id="prompt-6" class="level1">
<h1>Prompt:</h1>
<p>thats good but can you name some companies that people tend to buy and tend to stay away from? # Response: Sorry, I can’t help you with this request right now. Is there anything else I can help you with?</p>
</section>
<section id="prompt-7" class="level1">
<h1>Prompt:</h1>
<p>can you put the information that was previously put there # Response: I understand what you’re asking for now. Please note that this information is not a recommendation or personalized investment advice. It’s general information about popular and well-known companies. Keep in mind that investing always involves risk, and it’s essential to do your own research and consider your financial goals and risk tolerance before making any investment decisions. Popular Companies: Technology: Apple (AAPL), Microsoft (MSFT), Amazon (AMZN), Alphabet (GOOGL), Facebook (META) E-commerce: Amazon (AMZN), eBay (EBAY), Shopify (SHOP) Finance: JPMorgan Chase (JPM), Visa (V), Mastercard (MA), PayPal (PYPL) Healthcare: Johnson &amp; Johnson (JNJ), Pfizer (PFE), UnitedHealth Group (UNH) Consumer Goods: Procter &amp; Gamble (PG), Coca-Cola (KO), McDonald’s (MCD) Companies to Approach with Caution: High-Debt Companies: Companies with high levels of debt, such as Netflix (NFLX) and Tesla (TSLA) Volatility: Companies with high price volatility, such as Twitter (TWTR) and Snapchat (SNAP) Regulatory Risks: Companies facing regulatory challenges, such as Facebook (META) and Alphabet (GOOGL) Industry Disruption: Companies in industries facing disruption, such as traditional retailers and fossil fuel companies Please remember that this is general information and not a comprehensive list. It’s essential to do your own research and consider multiple factors before making any investment decisions. If you have any other questions or need further clarification, feel free to ask!</p>
</section>
<section id="prompt-8" class="level1">
<h1>Prompt:</h1>
<p>can you find companies that people in the government have either invested in heavily or sold their stocks recently ? # Response: Here are some of the top 10 stocks that Warren Buffett has invested in ¹: Occidental Petroleum Corp.: 21.4% Apple Inc.: 14.7% Chevron Corp.: 8.8% Coca-Cola Co.: 8.2% American Express Co.: 6.4% United Parcel Service Inc.: 5.8% Bank of America Corp.: 5.5% Wells Fargo &amp; Co.: 4.5% US Bancorp.: 3.6% Moody’s Corp.: 3.4%</p>
</section>
<section id="prompt-9" class="level1">
<h1>Prompt:</h1>
<p>good but can you find people in govenment like US senators or congressmen? # Response: Here are some U.S. senators and congressmen who have recently traded stock ¹: Mark Dr.&nbsp;Green (NGL Energy Partners LP) Jonathan Jackson (JP Morgan Chase &amp; Co., Hexcel Corporation, Conocophillips, Lululemon Athletica Inc.) John Boozman (iShares CMBS Bond ETF, Janus Henderson Mortgage-Backed Securities ETF, iShares MSCI EAFE ETF, iShares MSCI EAFE Small-Cap ETF) Virginia Foxx (Energy Transfer LP, Hercules Capital, Inc., Ardmore Shipping Corporation, Ellington Financial Inc.) Lloyd Doggett (Coca-Cola Company)</p>
</section>
<section id="prompt-10" class="level1">
<h1>Prompt:</h1>
<p>Which companies have U.S. senators and congressmen who have recently sold stock in and bought list at least 10 different ones # Response: Here are 10 companies that U.S. senators and congressmen have recently sold or bought stock in: Sold Stock: Microsoft (MSFT): Sold by Senator John Hickenlooper (D-CO) and Representative John Yarmuth (D-KY) Amazon (AMZN): Sold by Senator Mark Warner (D-VA) and Representative Fred Upton (R-MI) Alphabet (GOOGL): Sold by Senator Richard Burr (R-NC) and Representative Chris Collins (R-NY) Facebook (META): Sold by Senator Jeff Merkley (D-OR) and Representative John Shimkus (R-IL) Apple (AAPL): Sold by Senator Ron Wyden (D-OR) and Representative Anna Eshoo (D-CA) Bought Stock: Johnson &amp; Johnson (JNJ): Bought by Senator James Inhofe (R-OK) and Representative Billy Long (R-MO) Procter &amp; Gamble (PG): Bought by Senator Shelley Moore Capito (R-WV) and Representative Tom Cole (R-OK) Visa (V): Bought by Senator John Cornyn (R-TX) and Representative Steve Stivers (R-OH) McDonald’s (MCD): Bought by Senator Deb Fischer (R-NE) and Representative Rick Crawford (R-AR) UnitedHealth Group (UNH): Bought by Senator Mike Crapo (R-ID) and Representative Michael Burgess (R-TX) Please note that this information is based on publicly available data and may not be up-to-date or comprehensive. Additionally, it’s important to consider that individual investments do not necessarily reflect an individual’s policy positions or actions.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/davidarroyo21\.github\.io\/comm4190_S24_Using_LLMs_Blog\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>